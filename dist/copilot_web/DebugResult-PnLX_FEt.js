function getImportPath(filename) {
            return `./${filename}`;
        }
            import{j as t}from"./vendor-markdown-CBmlBP6m.js";import{r as h}from"./vendor-react-Dixhfmvb.js";import{B as g,W as m,a as f}from"./message-components-wGrDwG40.js";const v=({checkpointId:n,onRestore:c,title:d})=>{const[l,i]=h.useState(!1),s=async()=>{if(!l){i(!0);try{const r=await m.restoreWorkflowCheckpoint(n),o=r.workflow_data_ui||r.workflow_data;o?(r.workflow_data_ui?f.loadGraphData(o):f.loadApiJson(o),console.log(`Restored workflow checkpoint ${n}`),c()):(console.error("No workflow data found in checkpoint"),alert("No workflow data found in checkpoint."))}catch(r){console.error("Failed to restore checkpoint:",r),alert("Failed to restore workflow checkpoint. Please try again.")}finally{i(!1)}}};return t.jsx("button",{onClick:s,disabled:l,className:`p-1 rounded transition-colors ${l?"text-gray-400 cursor-not-allowed":"text-gray-500 hover:text-blue-600 hover:bg-blue-50"}`,title:d||`Restore checkpoint ${n}`,children:t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",className:l?"animate-spin":"",children:[t.jsx("path",{d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),t.jsx("path",{d:"M8 4.466V2.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 6.658A.25.25 0 0 1 8 6.466z"})]})})};function N({content:n,name:c="Assistant",avatar:d,format:l="markdown",onFinishLoad:i}){h.useEffect(()=>{i?.()},[]);let s,r=null,o=!1;try{if(s=JSON.parse(n),s.ext){let e=s.ext.find(a=>a.type==="workflow_rewrite_checkpoint"||a.type==="debug_checkpoint"&&a.data?.checkpoint_type==="workflow_rewrite_start");e&&e.data&&e.data.checkpoint_id?(r=e.data.checkpoint_id,o=!0):(e=s.ext.find(a=>a.type==="workflow_rewrite_complete"),e&&e.data&&e.data.version_id?(r=e.data.version_id,o=!0):(e=s.ext.find(a=>a.type==="debug_checkpoint"),e&&e.data&&e.data.checkpoint_id&&(r=e.data.checkpoint_id,o=!1))),s.ext.find(a=>a.type==="workflow_update")&&(o=!0)}}catch(e){return console.error("Failed to parse DebugResult content:",e),null}const x=e=>l==="markdown"?e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code class="bg-gray-100 px-1 rounded">$1</code>').replace(/\n/g,"<br/>"):e,w=o?"bg-green-50 border border-green-200 p-4 rounded-lg":"bg-gray-100 p-4 rounded-lg",p=o?"text-green-700 text-sm leading-relaxed":"text-gray-700 text-sm leading-relaxed",u=o?t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("h4",{className:"text-green-800 font-medium",children:"Workflow Updated Successfully"})]}):null,k=o?t.jsx("div",{className:"mt-3 text-xs text-green-600",children:"ðŸ’¡ If you're not satisfied with the changes, click the restore button to revert to the previous version."}):null;return t.jsx(g,{name:c,children:t.jsx("div",{className:w,children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1 prose prose-sm max-w-none",children:[u,l==="markdown"?t.jsx("div",{className:p,dangerouslySetInnerHTML:{__html:x(s.text||"")}}):t.jsx("pre",{className:`whitespace-pre-wrap ${p}`,children:s.text||""}),k]}),r&&t.jsx("div",{className:"ml-2 flex-shrink-0",children:t.jsx(v,{checkpointId:r,onRestore:()=>{console.log(`Workflow restored from ${o?"workflow update":"debug"} checkpoint`)},title:o?`Restore to this version (Version ${r})`:`Restore checkpoint ${r}`})})]})})})}export{N as DebugResult};
