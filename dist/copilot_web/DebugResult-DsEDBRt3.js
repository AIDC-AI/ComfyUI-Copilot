function getImportPath(filename) {
            return `./${filename}`;
        }
            import{j as e}from"./vendor-markdown-CBmlBP6m.js";import{r as o}from"./vendor-react-Dixhfmvb.js";import{B as v}from"./message-components-wGrDwG40.js";import{R as b}from"./RestoreCheckpoint-C155IX7y.js";import{C as y,a as N}from"./workflowChat-BbvhnioM.js";import"./input.js";/* empty css     */import"./App-DCT1L5dN.js";const _=c=>{const{title:i="",isWorkflowUpdate:u=!1,className:d="",children:x}=c,[n,f]=o.useState(!1),l=u?"#166534":"#E5E7EB";return e.jsxs("div",{className:`relative shadow-gray-200 dark:shadow-gray-600 rounded-lg p-2 overflow-hidden ${d} ${n?"":"h-[200px]"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:typeof i=="string"?e.jsx("h3",{className:"text-sm text-gray-900 dark:text-white font-medium",children:i}):i}),e.jsx("button",{onClick:()=>f(!n),children:n?e.jsx(y,{color:l}):e.jsx(N,{color:l})})]}),e.jsx("div",{className:"dark:border-gray-700",children:x}),!n&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-40 w-full z-5 bg-gradient-to-t from-[#fff] to-transparent"})]})};function W({content:c,name:i="Assistant",avatar:u,format:d="markdown",onFinishLoad:x}){o.useEffect(()=>{x?.()},[]);const[n,f]=o.useState(null),[l,m]=o.useState(null),[s,p]=o.useState(!1);o.useEffect(()=>{try{const r=JSON.parse(c);if(f(r),r.ext){let t=r.ext.find(a=>a.type==="workflow_rewrite_checkpoint"||a.type==="debug_checkpoint"&&a.data?.checkpoint_type==="workflow_rewrite_start");t&&t.data&&t.data.checkpoint_id?(m(t.data.checkpoint_id),p(!0)):(t=r.ext.find(a=>a.type==="workflow_rewrite_complete"),t&&t.data&&t.data.version_id?(m(t.data.version_id),p(!0)):(t=r.ext.find(a=>a.type==="debug_checkpoint"),t&&t.data&&t.data.checkpoint_id&&(m(t.data.checkpoint_id),p(!1)))),r.ext.find(a=>a.type==="workflow_update")&&p(!0)}}catch(r){console.error("Failed to parse DebugResult content:",r)}},[c]);const g=r=>d==="markdown"?r.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code class="bg-gray-100 px-1 rounded">$1</code>').replace(/\n/g,"<br/>"):r,w=o.useMemo(()=>s?"bg-green-50 border border-green-200":"bg-gray-100",[s]),h=o.useMemo(()=>s?"text-green-700 text-sm leading-relaxed":"text-gray-700 text-sm leading-relaxed",[s]),k=o.useMemo(()=>s?e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("h4",{className:"text-green-800 font-medium",children:"Workflow Updated Successfully"})]}):null,[s]),j=o.useMemo(()=>s?e.jsx("div",{className:"mt-3 text-xs text-green-600",children:"ðŸ’¡ If you're not satisfied with the changes, click the restore button to revert to the previous version."}):null,[s]);return n?e.jsx(v,{name:i,children:e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[e.jsx(_,{title:k,isWorkflowUpdate:s,className:w,children:e.jsxs("div",{className:"flex-1 prose prose-sm max-w-none",children:[d==="markdown"?e.jsx("div",{className:h,dangerouslySetInnerHTML:{__html:g(n.text||"")}}):e.jsx("pre",{className:`whitespace-pre-wrap ${h}`,children:n.text||""}),j]})}),e.jsx("div",{className:"flex justify-end mt-2",children:!!l&&e.jsx("div",{className:"ml-2 flex-shrink-0",children:e.jsx(b,{checkpointId:l,onRestore:()=>{console.log(`Workflow restored from ${s?"workflow update":"debug"} checkpoint`)},title:s?`Restore to this version (Version ${l})`:`Restore checkpoint ${l}`})})})]})}):null}export{W as DebugResult};
